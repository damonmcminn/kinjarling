{"version":3,"sources":["../../es6/client/rt.js"],"names":[],"mappings":";;;;AAAA,IAAI,EAAE,GAAI,YAAC,KAAK,EAAE,GAAG,EAAE,MAAM,EAAK;;AAEhC,MAAI,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;;mBAExB,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC;;;;MAAvB,IAAI;;AAET,MAAI,MAAM,GAAG,EAAE,CAAC,IAAI,EAAE;AACpB,QAAI,OAAK,IAAI,AAAE;AACf,SAAK,aAAW,KAAK,AAAE;GACxB,CAAC,CAAC;;;AAGH,MAAI,QAAQ,GAAG,EAAE,CAAC;AAClB,QAAM,CAAC,OAAO,CAAC,UAAA,KAAK,EAAI;AACtB,YAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,EAAE,CAAC;GACjC,CAAC,CAAC;;AAEH,QAAM,CAAC,EAAE,CAAC,WAAW,EAAE,UAAA,IAAI,EAAI;;AAE7B,QAAI,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC,MAAM,EAAE;;AAE7B,cAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;KACvB;GACF,CAAC,CAAC;;AAEH,SAAO,UAAS,KAAK,EAAE;QAEhB,SAAS,GAAI,MAAM,CAAnB,SAAS;;AAEd,QAAI,IAAI,GAAG;AACT,UAAI,EAAE,KAAK;AACX,YAAM,EAAE,MAAM,CAAC,EAAE;KAClB,CAAC;;AAEF,QAAI,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;;AAEjC,QAAI,UAAU,IAAI,SAAS,EAAE;AAC3B,YAAM,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;AAC/B,qCAA6B,KAAK,CAAG;KACtC,MAAM,IAAI,CAAC,UAAU,EAAE;AACtB,iCAAyB,KAAK,CAAG;KAClC,MAAM;AACL,4CAAmC,KAAK,iBAAa;KACtD;GACF,CAAA;CACF,AAAC,CAAC","file":"es6/client/rt.js","sourcesContent":["let rt = ((group, uri, events) => {\n\n  let path = /\\/\\w+$/i.exec(uri).pop();\n\n  let [host] = uri.split(path);\n\n  let socket = io(host, {\n    path: `${path}`,\n    query: `group=${group}`\n  });\n\n  // build hash map of events\n  let eventMap = {};\n  events.forEach(event => {\n    eventMap[event.name] = event.fn;\n  });\n\n  socket.on('broadcast', data => {\n    // find the event\n    if (socket.id !== data.client) {\n      // execute mapped function\n      eventMap[data.name]();\n    }\n  });\n\n  return function(event) {\n    \n    let {connected} = socket;\n\n    let data = {\n      name: event,\n      client: socket.id\n    };\n\n    let validEvent = eventMap[event];\n\n    if (validEvent && connected) {\n      socket.emit('broadcast', data);\n      return `Broadcasted event: ${event}`;\n    } else if (!validEvent) {\n      return `Invalid event: ${event}`;\n    } else {\n      return `No connection. Is group '${group}' correct?`;\n    }\n  }\n});\n"]}